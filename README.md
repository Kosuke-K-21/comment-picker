# Comment Picker

講義アンケートの自由記述コメントを自動で分析・分類するWebアプリケーションです。Amazon Nova LLMを使用して、大量のコメントを効率的に整理し、重要な意見を抽出して講義改善に活用できます。

## 概要

Comment Pickerは、FastAPIバックエンドとReact TypeScriptフロントエンドを組み合わせたフルスタックアプリケーションです。Docker化されており、簡単にデプロイできます。

## アーキテクチャ

- **バックエンド**: FastAPI (Python) - `/backend`
- **フロントエンド**: React + TypeScript - `/frontend`
- **AI/LLM**: Amazon Nova-lite & Nova-pro (Amazon Bedrock経由)
- **コンテナ化**: Docker + Docker Compose

## 主な機能

### 1. CSVファイルアップロード機能
- Excel（.xlsx）またはCSV（.csv）形式のファイルをアップロード
- 「必須」「任意」を含むコメント列を自動検出
- アップロード後、データの概要情報を表示

### 2. AI分析機能
- **Amazon Nova-lite LLM**を使用したコメント分析
- 以下の4つの観点で自動分類：
  - **感情分析**: ポジティブ/中立/ネガティブ
  - **カテゴリ分類**: 講義内容/講義資料/運営/その他
  - **重要度**: 高/中/低
  - **共通性**: 高/中/低
- 分析コストをリアルタイムで表示

### 3. 危険コメント検出
- ネガティブかつ重要度が高いコメントを自動検出
- 緊急対応が必要なコメントをアラート表示

### 4. 統計情報の可視化
- カテゴリ別コメント件数・割合の表示
- 感情分析結果の可視化（全体・カテゴリ別）
- 円グラフと棒グラフによる直感的な表示

### 5. トップコメント表示
- 重要度×共通性スコアによるランキング
- 全体およびカテゴリ別のトップコメント表示
- 表示件数の調整可能（1-10件）

### 6. アラート機能
- カスタム条件によるアラート設定
- 感情・カテゴリ・重要度の組み合わせ条件
- 件数または割合での閾値設定
- リアルタイムアラート通知

### 7. レポート自動生成
- **Amazon Nova-pro LLM**による包括的レポート作成
- トップ50コメントの分析
- ポジティブ意見・ネガティブ意見・総合洞察の3セクション構成

### 8. データエクスポート
- 分析結果を含むCSVファイルのダウンロード
- タイムスタンプ付きファイル名で自動保存

## クイックスタート

### 前提条件

- Docker
- Docker Compose
- AWS認証情報（Amazon Bedrock使用のため）

### アプリケーションの起動

1. リポジトリをクローンしてプロジェクトルートに移動
2. 環境変数を設定：

```bash
cp backend/.env.example backend/.env
```

3. `backend/.env`ファイルを編集してAWS認証情報を設定：

```env
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-east-1
```

4. 両方のサービスをビルドして起動：

```bash
docker-compose up --build
```

これにより以下が実行されます：
- FastAPIバックエンドをビルドして `http://localhost:8000` で公開
- Reactフロントエンドをビルドして `http://localhost:3000` で公開
- サービス間のネットワークを設定

### アプリケーションへのアクセス

- **フロントエンド**: http://localhost:3000
- **バックエンドAPI**: http://localhost:8000
- **バックエンドAPIドキュメント**: http://localhost:8000/docs

## 使用方法

### Step 1: ファイルアップロード
1. Webアプリケーション（http://localhost:3000）にアクセス
2. 「ファイルを選択」ボタンをクリック
3. Excel（.xlsx）またはCSV（.csv）ファイルを選択
4. 「アップロード」ボタンをクリック

### Step 2: データ確認
1. 「📊 データ表示」タブでアップロードされたデータを確認
2. ページネーション機能で大量データも快適に閲覧

### Step 3: AI分析実行
1. 「解析開始」ボタンをクリック
2. 分析進行状況を確認
3. 完了後、解析コストが表示される

### Step 4: 結果確認
- **📈 解析結果タブ**: 統計情報と可視化
- **🏆 トップコメントタブ**: 重要度の高いコメント
- **📋 レポートタブ**: AI生成の包括的レポート
